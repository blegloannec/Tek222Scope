#!/usr/bin/env python

import sys
import matplotlib.pyplot as plt

## Jeux de donnees exemples
data1 = '8E989AA0A09C999795929497989C9C9E9E99999697989A9C9C9C9D9A989999979A9A9B9C9D9C9A989899999B9C9E9C9B9A9A97989A9C9A9D9C9C9B9C999A9A9B9C9F9D9A989A98999A9D9C9D9C9A9997999A9A9C9D9E9B9B99979999979B9F9E9B9A9596979B9C9DA19D9B999896979A9B9D9F9D9C9B969394989A9CA09D9C999A959599999B9C9E9999969595989998999F9A9A9A9797979A9C9C9D9A9A96979597999C9B9D9A9A9B9B989A999C9C9D9C9B989596979A9D9D9D9D99989798989A9D9C9C9D9C9B9698979A9A9D9E9B9B9896989B9B9B9F9E9C9A9998969898979D9D9C8C88797781979BA5A69C948783868B919A9F9C9289857B838489999FA69C8F8E8784848D9D9C9E948D83817F8892969E9D958F8B80818D8C98A3A39A8D837B798592949CA0998987837F859E9C9EA39E9A9C9593999A9A9E9F9C9999969A9B9C9F9E9D9E9B9B9B9898999CA09D9C9A9B99999B999FA09F9C9E9A9A999B9C9C9D9D9B9A9B9A989B9A9E9F9F9D9B9C9A99989C9D9D9F9C9D9A99999D9C9B9D9C9C9B9B9A99989C9E9C9D979393918E949A9D9FA098878E837F8793949EA59F8F877B787C8593A3A0988F847B81849195A4A89B90907C7B808993A2A39F8C89777982909B9FA79F8F8E8282858F949BA09994878A8A8C989AA09E9F9B9C9696979A9A9B9D999693929595979C9C9F9D9A99989597999C9E9E9A96'

data2 = '9C9D9A9B98959696999E9D9F9B959589888F98989B99998B877C7F8187979CA49E9488847C83929E9EA1968A847E7D818C999A9D9B968786827E8998A4A59C8F85797A818F939FA09A8C8E857C898F9D9DA7A0967F787B828D939CA6978D8C85959C9E9E9DA19D9B99939297999A9D9E9B989898979C9D9D9F9F9D9898999895979A9F9C9A99949697989B9C9F9F9E98999B989A999D9B9E9B9A9A989798979D9FA09D9B999797979B9B9D9E9C9A9696959897979CA39D999A969496989CA1A1908C878B7987899B9BA09F9784807F8590A7A4AAA09477827C848D91A2A19F938182848F97939B9D9C9B9B8E8A939697A0A29A989E94989C9A9CA0A39F9A9F9A96979A98A1A19C9B999794999CA09DA19F9E9899979B999E9E9F9D9C9998989A9CA29FA3A19F99989B9B9D9D9F9E9C9B999798989B9EA0A0A09E9A9997999EA09F9F9D999896969A9A9E9CA39E978D887F8B90A3A5A79F8B7F7F76848CA099A2978F84877D85929A99AA9E9A8685767D89999AA19B8F81827D8589A2A5A3979089838581869D9FA69D988D'

data3 = '979796989A989C9C9B9898979A9A9D99A09D9C9A99999897979D9D9B9C9898979694989E9C9D9F9A98979996989B9C9B9A958D87887D90A3A7A9A191887E7884919FA1949C8E7A7D81868B9BA5A5A19194858688929EA4A59B8C897A81798F979F9C9999897F8285909BA3AD9892857976818F959D9CA18F86888A939C9B9FA39E9696919194999C9FA09A9695959195989AA19D9C99979295969899A09F9D989A959799989B9F9B9C9A999598959A999D9E9D9A9B98969B9C9C9E9F9C9B9B969797979B9E9D9E9A969493939A9BA09D9E9B959291949A979F9B9C8E88837F7F8C93A3A3A19386757C839490A59EA0878577797E928D9FA9A6938E817E7D8992A2A397908E87828696999D9B9C959B969696999AA0A19C9B969494969A9BA19D9D9A9C9A999B9D9EA09D9E9D9A97999A9D9EA19F9C999C96999B9C9D9D9E9F9D9A9A98999C9C9D9F9D9B9A99989A9E9D9E9FA09C9C9A9B999B9C9E9E9C9A9C9999989CA0A09EA09B9B98999C9C97A1A09E9C9A999B979B9B9E9F9E9B9A969B989D9F9D9D9C999697999B9B9D9EA09F'

data2d = '9CAD99B1A0B4A1BC9DB897B298AF9EB79EB89BB69AAD96ACA0B5A0AF9FB199AD9AAA9CB79CB69DB496AF98B59BBA9EBE9BB995B598B597BA9FC19ABB97B395B599BC9DC09BBC9BB995B79BBE98C09DBC9ABA96B99ABC99BF9BBD95B896B997BC9CC39ABF96B996B997BD98BE99BD97B896B896BB99C198BD97BB96BA94BC96BF95BD98BA96BA99BD97BF95BC95B996B998BE93BF94BC91BA94B79ABD9CBD9ABC99B79DB99DBC9DBE9BBB9AB79DB69CB8A0BD9BB998B39AB29DB49FB99AB59AAE97AE9DB19CB399AD98A597A69DA79FAB9CA49A9E999D9DA49DA79FA199989B939B9A9E9F9E9498849B879A8FA09C9D8E9A8499899A929F9A9B9099849B87A398A79E9C8E9F849A859E919E9A9F90988698869B919E8FA190978F9A909B919D909B8F978F9B92998EA08FA0909C8D9A8E9B909F909AA59DA099A39BAA9FB299AD9BAB99AB9FB19EB79CB49BB09BB19FB39EB799B397B19DB0A2B6A0B79EB498B1A4B2A5B6B0B79B8B8A7BAA91AF97B9A09B8C97809E8AAC95B59E9D8D90829685B29CA29DA38F947E9484B39AAE9AA89E98AA99ACAABBAABBA2B495AD9EB0A7BBA9BCA0B799B19CB3A2BBA8BEA3B99DB59DB59FBAA6BDA0B69DB399B69FBCA2C09FBD9CB998B79DC09BC19BBD99BA95B897BD99C098BB94B994B995BD99C099BE96B995B996BE9BC096BE97B997B996BC96BF95BD93BA93B893BD95C092BC92B995B998BC97C095BE97BA96B79ABB97BE96BA93B697B79ABB99BE97BA94B797B79ABB99BC98BC96B599B89BBB9EBB98B996B597B699B89DBD98B897B697B49AB99CBE97B696B394B39CBB9DBF97B896B494B59CBB9FBE9BB994B597B498B99FBB9AB393AE93AF98B59FB99AB395B095AE96B5A0B89AB39BAE9BADA1B4A8B7A6B6A1AE9BADA5B7A3B6A5B59FB099AFA1B4A1B9A3B59CAF96AD9EB5A1B8A1B498ACA0B09FB6A6BBA3B698AC9DB09FB8A5BA9FB69DB09FB3A0B6A1B99EB29DB19DAFA2B6A1B99DB49DB29DB3A2B8A2B9A3B998B19CB6A2BCA0BE9FBA97B59DB5A5BDA1BF9FBC93B39BB6A0BCA0BD9EBA94B3A1B9A7BCA5BFA1BAA2B5A4B8A4BBA4BEA2B9A2B6A3B6A5BDA3BDA2B8A1B6A3B2A5BAA3BFA3B9A3B5A3B4A4BAA4BDA3B9A0B5A4B5A2B9A2BFA5B9A2AFA2B2A2B6A4BBA3B7A3B1A3B2A3BBA4BBA3B8A4B6A2B5A3BAA4BCA3BAA4B7A1B5A2BCA0BDA0BB9EB89AB79CBB9FC09EBB9AB699B79EBDA0BF9FBE9BB79EB99FBEA3BFA5BDA0B9A2BAA0BDA4C19EBDA0BB9FB9A0BDA3C09BBC9DB99BB89DBCA1BF9DBC9EB99EB89FBEA1BE9EBD9DBB9EB9A2BE9FBF9FBC9BB79DBAA1BD9FC1A0BC9BBA9FB9A2BE9EBF9FBD9BB89EB99EBBA3C09DBB9AB79FB8A2BBA4BF9BBB9CB699B5A2B9A4BC9CB998B59AB4A1BAA2BC9CB997B699B4A2BBA3BB9EB998B39DB5A4BB9FBCA0BA96B497B29BB8A3BC9EB9'


## Fonctions de trace
def plot1d(data):
    ydata = []
    for i in xrange(0,len(data),2):
        ydata.append(int(data[i:i+2],16))
    plt.axis([0,len(data)/2,0,255])
    plt.plot(ydata)

def plot2d(data):
    xdata,ydata = [],[]
    for i in xrange(0,len(data),4):
        ydata.append(int(data[i:i+2],16))
        xdata.append(int(data[i+2:i+4],16))
    #plt.axis('scaled')
    plt.axis([0,255,0,255])
    plt.scatter(xdata,ydata,s=1,marker='.')

## Traces des exemples
def mainex1d():
    plt.subplot(311)
    plot1d(data1)
    plt.subplot(312)
    plot1d(data2)
    plt.subplot(313)
    plot1d(data3)
    plt.show()

def mainex2d():
    plot2d(data2d)
    plt.show()

## Main
def main2d():
    if len(sys.argv)!=2:
        print >> sys.stderr, 'usage: %s data_file' % (sys.argv[0])
        sys.exit(1)
    fich = sys.argv[1]
    f = open(fich,'r')
    plot2d(f.read().strip())
    f.close()
    plt.savefig(fich+'.png')
    plt.show()

main2d()
